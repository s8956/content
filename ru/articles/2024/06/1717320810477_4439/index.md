---
# -------------------------------------------------------------------------------------------------------------------- #
# General settings.
# -------------------------------------------------------------------------------------------------------------------- #

title: 'Пользователи и группы в FreeBSD и Linux'
description: ''
images:
  - 'https://images.unsplash.com/photo-1582675002932-42541ef3c690'
categories:
  - 'inDev'
  - 'linux'
  - 'bsd'
  - 'terminal'
tags:
  - 'freebsd'
  - 'linux'
  - 'adduser'
  - 'usermod'
  - 'userdel'
  - 'lock'
  - 'unlock'
  - 'groupmod'
  - 'useradd'
  - 'gpasswd'
authors:
  - 'KaiKimera'
sources:
  - ''
license: 'CC-BY-SA-4.0'
complexity: '0'
toc: 1
comments: 1

# -------------------------------------------------------------------------------------------------------------------- #
# Date settings.
# -------------------------------------------------------------------------------------------------------------------- #

date: '2024-06-02T12:33:30+03:00'
publishDate: '2024-06-02T12:33:30+03:00'
expiryDate: ''
lastMod: '2024-06-02T12:33:30+03:00'

# -------------------------------------------------------------------------------------------------------------------- #
# Meta settings.
# -------------------------------------------------------------------------------------------------------------------- #

type: 'articles'
hash: 'eea13ebc7ca98721d017d911a8f6354d4605e58f'
uuid: 'eea13ebc-7ca9-5721-b017-d911a8f6354d'
slug: 'eea13ebc-7ca9-5721-b017-d911a8f6354d'

draft: 0
---

Набор команд для работы с группами и пользователями в {{< tag "Linux" >}} и {{< tag "FreeBSD" >}}.

<!--more-->

## FreeBSD

Во {{< tag "FreeBSD" >}} для работы с пользователями и группами, можно использовать несколько инструментов. Я использую мощную утилиту `pw`. Конфигурация утилиты `pw` находится в файле `/etc/pw.conf`.

### Создать пользователя

- Создать пользователя `username`, добавить его в группу `wheel`, указать комментарий `User username` и задать пароль:

```bash
u='username'; pw adduser "${u}" -m -G wheel -c "User ${u}" && passwd "${u}";
```

### Переименовать пользователя

- Переименовать домашнюю директорию пользователя, переименовать пользователя и его группу:

```bash
u_old='username_old'; u_new='username_new'; mv "/home/${u_old}" "/home/${u_new}" && pw usermod -n "${u_old}" -l "${u_new}" -d "/home/${u_new}" && pw groupmod -n "${u_old}" -l "${u_new}";
```

### Удалить пользователя

- Удалить пользователя `username` и его домашнюю директорию (`-r`):

```bash
u='username'; pw userdel "${u}" -r;
```

### Заблокировать пользователя

- Заблокировать пользователя `username`:

```bash
u='username'; pw lock "${u}";
```

### Разблокировать пользователя

- Разблокировать пользователя `username`:

```bash
u='username'; pw unlock "${u}";
```

### Добавить пользователя в дополнительную группу

- Добавить пользователя `username` в группу `www`:

```bash
u='username'; pw groupmod www -m "${u}";
```

- Заменить все текущие группы пользователя `username` на группы `wheel` и `devels`:

```bash
u='username'; pw usermod "${u}" -G wheel,devels;
```

### Удалить пользователя из дополнительной группы

- Удалить пользователя `username` из группы `www`:

```bash
u='username'; pw groupmod www -d "${u}";
```

### Посмотреть информацию о пользователе

- Посмотреть информацию о пользователе `username`:

```bash
u='username'; pw show user "${u}";
```

## Linux

В отличие от {{< tag "FreeBSD" >}}, в {{< tag "Linux" >}} можно пользоваться стандартными инструментами `useradd`, `usermod` и `userdel`.

### Создать пользователя

- Создать пользователя `username`, добавить его в группу `sudo`, указать комментарий `User username` и задать пароль:

```bash
u='username'; useradd -m -G sudo -c "User ${u}" "${u}" && passwd "${u}";
```

### Переименовать пользователя

- Переименовать домашнюю директорию пользователя, переименовать пользователя и его группу:

```bash
u_old='username_old'; u_new='username_new'; usermod -l "${u_new}" -d "/home/${u_new}" -m "${u_old}" && groupmod -n "${u_new}" "${u_old}";
```

### Удалить пользователя

- Удалить пользователя `username` и его домашнюю директорию (`-r`):

```bash
u='username'; userdel -r "${u}";
```

### Заблокировать пользователя

- Заблокировать пользователя `username`:

```bash
u='username'; usermod -L "${u}";
```

### Разблокировать пользователя

- Разблокировать пользователя `username`:

```bash
u='username'; usermod -U "${u}";
```

### Добавить пользователя в дополнительную группу

- Добавить пользователя `username` в группу `www`:

```bash
u='username'; usermod -aG www "${u}";
```

### Удалить пользователя из дополнительной группы

- Удалить пользователя `username` из группы `www`:

```bash
u='username'; gpasswd -d "${u}" www;
```

### Изменить основную группу пользователя

- Изменить основную группу пользователя `username` на группу `www`:

```bash
u='username'; usermod -g www "${u}";
```

### Заменить у пользователя дополнительные группы

- Заменить у пользователя `username` все дополнительные группы на группу `www`:

```bash
u='username'; usermod -G www "${u}";
```
