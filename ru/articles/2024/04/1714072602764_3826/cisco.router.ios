! @package    Cisco / IOS
! @author     Kai Kimera <mail@kai.kim>
! @copyright  2024 Library Online
! @license    MIT
! @version    0.1.0
! @link       https://lib.onl/ru/articles/2024/04/8caf49e3-8f13-5145-90ab-8ba1f2cb1c37/
! -------------------------------------------------------------------------------------------------------------------- !

! -------------------------------------------------------------------------------------------------------------------- !
! SERVICES.
! -------------------------------------------------------------------------------------------------------------------- !
service password-encryption
service timestamps debug datetime msec localtime show-timezone
service timestamps log datetime msec localtime show-timezone
service tcp-keepalives-in
service tcp-keepalives-out
no service pad
no service udp-small-servers
no service tcp-small-servers
no service finger
! -------------------------------------------------------------------------------------------------------------------- !
! GENERAL.
! -------------------------------------------------------------------------------------------------------------------- !
clock timezone UTC 3
! Updates the hardware clock with a new software clock setting.
!clock update-calendar
hostname gw1
logging buffered 4096
ip cef
ip multicast-routing
no ip source-route
no ip bootp server
! Reserving memory for critical notifications (KB).
memory reserve critical 4096
! Reserve memory for console access (KB).
!memory reserve console 512
! -------------------------------------------------------------------------------------------------------------------- !
! Authentication, Authorization, and Accounting (AAA).
! -------------------------------------------------------------------------------------------------------------------- !
aaa new-model
aaa authentication login default local
aaa authentication ppp default local
enable password qwerty-en
username admin privilege 15 password qwerty-admin
! -------------------------------------------------------------------------------------------------------------------- !
! LOGIN.
! -------------------------------------------------------------------------------------------------------------------- !
!login block-for 60 attempts 3 within 10
!login delay 5
!login quiet-mode access-class 10
!login on-failure log every 5
!login on-success log every 3
! -------------------------------------------------------------------------------------------------------------------- !
! TERMINAL.
! -------------------------------------------------------------------------------------------------------------------- !
line con 0
  logging synchronous
line vty 0 4
  access-class ACL_VTY in
  logging synchronous
  privilege level 15
  transport input telnet ssh
line aux 0
  transport input none
  transport output none
  no exec
  exec-timeout 0 1
  no password
! -------------------------------------------------------------------------------------------------------------------- !
! SSH.
! Generate RSA key pairs for SSH Public-Key Authentication:
! - crypto key generate rsa modulus 2048
! -------------------------------------------------------------------------------------------------------------------- !
ip ssh time-out 60
ip ssh authentication-retries 5
ip ssh version 2
! -------------------------------------------------------------------------------------------------------------------- !
! INTERFACES.
! -------------------------------------------------------------------------------------------------------------------- !
! WAN.
interface FastEthernet0/0
  ip address dhcp
  ip nat outside
! LAN.
interface FastEthernet0/1
  ip address 10.88.0.1 255.255.0.0
  ip nat inside
! Loopback #0.
interface Loopback0
  ip address 10.90.10.1 255.255.255.255
! Loopback #1.
interface Loopback1
  ip address 10.90.20.1 255.255.255.0
  ip nat inside
! Disable HTTP server.
no ip http server
no ip http secure-server
! -------------------------------------------------------------------------------------------------------------------- !
! NTP.
! -------------------------------------------------------------------------------------------------------------------- !
ntp update-calendar
ntp server 194.190.168.1
! -------------------------------------------------------------------------------------------------------------------- !
! DNS.
! -------------------------------------------------------------------------------------------------------------------- !
ip domain lookup
ip domain timeout 2
ip domain name home.lan
ip name-server 1.1.1.1
ip name-server 8.8.8.8
ip dns server
! -------------------------------------------------------------------------------------------------------------------- !
! DHCP.
! -------------------------------------------------------------------------------------------------------------------- !
! IP pool: '10.88.200.0 - 10.88.255.254'.
! Network: '10.88.0.0/16'.
! Gateway: '10.88.0.1'.
! DNS:     '10.88.0.1'.
! -------------------------------------------------------------------------------------------------------------------- !
ip dhcp excluded-address 10.88.0.1
ip dhcp excluded-address 10.88.0.2 10.88.200.0
ip dhcp pool LAN
  network 10.88.0.0 255.255.0.0
  default-router 10.88.0.1
  domain-name home.lan
  dns-server 10.88.0.1
! -------------------------------------------------------------------------------------------------------------------- !
! NAT.
! -------------------------------------------------------------------------------------------------------------------- !
ip nat inside source list ACL_NAT interface FastEthernet0/0 overload
! -------------------------------------------------------------------------------------------------------------------- !
! ACL.
! -------------------------------------------------------------------------------------------------------------------- !
!
! Access to a Cisco terminal.
ip access-list standard ACL_VTY
  permit 10.0.0.0 0.255.255.255
  permit 172.16.0.0 0.15.255.255
  permit 192.168.0.0 0.0.255.255
! NAT (overload).
ip access-list standard ACL_NAT
  permit 10.88.0.0 0.0.255.255
!
end
